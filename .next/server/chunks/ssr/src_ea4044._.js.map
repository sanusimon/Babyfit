{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/My%20files/Babyfit/babyfit-next/latest/shoping/src/lib/wixClientServer.js"],"sourcesContent":["  import { createClient, OAuthStrategy } from \"@wix/sdk\";\n  import { products,collections } from \"@wix/stores\";\n  // import { cookies } from \"next/headers\";\n\n\n  export const wixClientServer  = async () =>{\n\n      let refreshToken;\n      try{\n          const cookiesStore = await cookies();\n          refreshToken = JSON.parse(cookiesStore.get(\"refreshToken\")?.value || \"{}\");    \n      } catch(err){\n\n      }\n          const wixClient = createClient({\n          modules: {\n            products,\n            collections\n          },\n          auth: OAuthStrategy({\n            clientId: process.env.NEXT_PUBLIC_WIX_CLIENT_ID,\n            tokens: {\n              refreshToken,accessToken:{value:\"\" , expiresAt:0}\n            },\n          }),\n        });\n  return wixClient     \n  }\n      \n"],"names":[],"mappings":";;;AACE;AADA;AACA;AAAA;AADA;;;AAKO,MAAM,kBAAmB;IAE5B,IAAI;IACJ,IAAG;QACC,MAAM,eAAe,MAAM;QAC3B,eAAe,KAAK,KAAK,CAAC,aAAa,GAAG,CAAC,iBAAiB,SAAS;IACzE,EAAE,OAAM,KAAI,CAEZ;IACI,MAAM,YAAY,CAAA,GAAA,kJAAA,CAAA,eAAY,AAAD,EAAE;QAC/B,SAAS;YACP,UAAA,6MAAA,CAAA,WAAQ;YACR,aAAA,mNAAA,CAAA,cAAW;QACb;QACA,MAAM,CAAA,GAAA,wKAAA,CAAA,gBAAa,AAAD,EAAE;YAClB,QAAQ;YACR,QAAQ;gBACN;gBAAa,aAAY;oBAAC,OAAM;oBAAK,WAAU;gBAAC;YAClD;QACF;IACF;IACN,OAAO;AACP"}},
    {"offset": {"line": 41, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 47, "column": 0}, "map": {"version":3,"sources":["file:///Volumes/My%20files/Babyfit/babyfit-next/latest/shoping/src/app/login/page.jsx"],"sourcesContent":["\"use client\";\nimport React, { useState } from \"react\";\nimport \"./login.scss\";\nimport { wixClientServer } from \"@/lib/wixClientServer\";\nimport { usePathname } from \"next/navigation\";\nimport { LoginState } from \"@wix/sdk\";\n\nconst MODE = {\n  LOGIN: \"LOGIN\",\n  REGISTER: \"REGISTER\",\n  RESET_PASSWORD: \"RESET_PASSWORD\",\n  EMAIL_VERIFICATION: \"EMAIL_VERIFICATION\",\n};\n\nconst LoginPage = () => {\n  const [username, setUserName] = useState(\"\");\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [emailcode, setEmailCode] = useState(\"\");\n  const [mode, setMode] = useState(MODE.LOGIN);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n\n  const pathName = usePathname();\n\n  const formTitle =\n    mode === MODE.LOGIN\n      ? \"Log in\"\n      : mode === MODE.REGISTER\n      ? \"Register\"\n      : mode === MODE.RESET_PASSWORD\n      ? \"Reset your password\"\n      : \"Verify your Email\";\n\n  const buttonTitle =\n    mode === MODE.LOGIN\n      ? \"Login\"\n      : mode === MODE.REGISTER\n      ? \"Register\"\n      : mode === MODE.RESET_PASSWORD\n      ? \"Reset\"\n      : \"Verify\";\n\n  const wixClient = wixClientServer();\n  console.log(\"Wix Client:\", wixClient);\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setIsLoading(true);\n    setError(\"\");\n    setMessage(\"\");\n    try {\n      let response;\n      switch (mode) {\n        case MODE.LOGIN:\n          response = await wixClient.auth.login({ email, password });\n          setMessage(\"Login successful!\");\n          break;\n\n        case MODE.REGISTER:\n          response = await wixClient.auth.register({\n            email,\n            password,\n            profile: { nickname: username },\n          });\n          setMessage(\"Registration successful! Please verify your email.\");\n          break;\n\n        case MODE.RESET_PASSWORD:\n          response = await wixClient.auth.sendPasswordResetEmail(email, pathName);\n          setMessage(\"Password reset email sent!\");\n          break;\n\n        case MODE.EMAIL_VERIFICATION:\n          response = await wixClient.auth.processVerification({\n            verificationCode: emailcode,\n          });\n          setMessage(\"Email verified successfully!\");\n          break;\n\n        default:\n          throw new Error(\"Invalid mode\");\n      }\n\n      switch(response?.loginState){\n        case LoginState.SUCCESS:\n            setMessage(\"Successfull! You are being redirected\");\n            break;\n            default:\n                break\n      }\n    } catch (err) {\n      setError(\"Something went wrong. Please try again.\");\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <section className=\"login_page\">\n      <div className=\"container\">\n        <form className=\"login_box\" onSubmit={handleSubmit}>\n          <h2 className=\"title\">{formTitle}</h2>\n          <div className=\"form_\">\n            {mode === MODE.REGISTER && (\n              <div className=\"form_control\">\n                <label>Username</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"John\"\n                  name=\"username\"\n                  onChange={(e) => setUserName(e.target.value)}\n                />\n              </div>\n            )}\n\n            {mode !== MODE.EMAIL_VERIFICATION ? (\n              <div className=\"form_control\">\n                <label>Email</label>\n                <input\n                  type=\"email\"\n                  placeholder=\"john@gmail.com\"\n                  name=\"email\"\n                  onChange={(e) => setEmail(e.target.value)}\n                />\n              </div>\n            ) : (\n              <div className=\"form_control\">\n                <label>Verification Code</label>\n                <input\n                  type=\"text\"\n                  placeholder=\"Code\"\n                  name=\"emailcode\"\n                  onChange={(e) => setEmailCode(e.target.value)}\n                />\n              </div>\n            )}\n\n            {(mode === MODE.LOGIN || mode === MODE.REGISTER) && (\n              <div className=\"form_control\">\n                <label>Password</label>\n                <input\n                  type=\"password\"\n                  placeholder=\"Enter password\"\n                  name=\"password\"\n                  onChange={(e) => setPassword(e.target.value)}\n                />\n              </div>\n            )}\n\n            {mode === MODE.LOGIN && (\n              <span className=\"frgt_txt\" onClick={() => setMode(MODE.RESET_PASSWORD)}>\n                Forgot Password?\n              </span>\n            )}\n\n            <button className=\"cmnBtn\" disabled={isLoading}>\n              {isLoading ? \"Loading...\" : buttonTitle}\n            </button>\n\n            {error && <div className=\"error\">{error}</div>}\n\n            {mode === MODE.LOGIN && (\n              <span className=\"frgt_txt\" onClick={() => setMode(MODE.REGISTER)}>\n                Don't have an account?\n              </span>\n            )}\n\n            {mode === MODE.REGISTER && (\n              <div className=\"text-sm underline cursor-pointer\" onClick={() => setMode(MODE.LOGIN)}>\n                Have an account?\n              </div>\n            )}\n\n            {mode === MODE.RESET_PASSWORD && (\n              <div className=\"text-sm underline cursor-pointer\" onClick={() => setMode(MODE.LOGIN)}>\n                Go back to Login\n              </div>\n            )}\n\n            {message && <div className=\"text-green-600 text-sm\">{message}</div>}\n          </div>\n        </form>\n      </div>\n    </section>\n  );\n};\n\nexport default LoginPage;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 340, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}